第三章 数据类型、运算符和表达式



3.1 数据类型



基本类型包括整型、实型（又称浮点型）、字符型和枚举型四种。

以及构造类型、指针类型和空类型。



C语言规定在使用一个数据之前，必须定义数据的类型。



3.2 常量

常量又称为常数。常量可以有不同的类型。系统可以通过书写形式自动识别，无需定义。



**整数常量**



整数常量通常称为整数，不带有小数部分，包括正整数负整数和0。

C语言中，整数常量可以有三种书写形式：

八进制（必须以0开头）。

十进制：没有前缀，即通常的整数。

十六进制：必须以0X或0x开头，由0~9、a~f或A~F组成的字符串。



对于整数常量在16位pc中，一般占用内存的2字节。

长整型常量需要在整数常量的数值后面加L或者1。 一般占用内存的4字节



**实型常量**



实型常量又称为浮点型常量或实数，只使用十进制（必须腰出现小数点）。通常只占用4字节。



**字符常量**



字符常量包括普通字符常量和转义字符常量两种，每个字符常量在内存中占用1字节。



字符常量在内存中实际存储的是 ASCII 码值，例如：

'A' → 65

'0' → 48



##### **字符用单引号，字符串用双引号。**



**字符串常量**



简称为"字符串"。

没有字符的字符串简称为”空字符串“。

编译时自动在字符串的末尾处加一个转义字符'\\0'作为字符串的结束标志，即长度为n个字符的字符串占用n＋1字节。



**符号常量**



符号常量的定义方法如下:



\#define 符号常量 常量



符号常量建议用大型英文字母。

每个定义必须独占一行，一般放在程序开头，其后不跟分号。





3.3 变量



变量三要素：变量名、变量值、变量类型。



变量的数据类型



整形变量



根据占用内存字节不同，分为四种，即：

unsigned 无符号整型、



16位:

short 短整型 2字节

int 基本整形 2字节

long 长整型 4字节



32位编译器中:

int 4字节

long型变量 4字节

short型变量 2字节



实型变量



float 单精度实型 4字节  保留6~7位有效数字

double 双精度实型 8字节 保留15~16位有效数字



字符型变量

char 占用内存 1字节



变量的定义和初始化



c语言规定，任何变量必须先定义后使用。一般格式如下：

数据类型符 变量名1\[,变量名2,...];

变量定义可以放在函数之外，也可以放在函数体或复合语句中。



变量的初始化



一般格式如下:

数据类型符 变量名1=初值1\[,变量名2\[=初值2],...];



有名常量的定义（貌似不重要）



3.4 运算符和表达式



算术运算符：

包括+、-、\*、/整型除法结果为整数（向零截断）、%（取余，只能用于整数）、+（取正）和-（取负）



算术表达式求值规则



优先级：\*/%高于+-

同优先级从左到右

括号最高



关系运算符

> < >= <= == != 

C语言中 关系成立返回1，不成立返回0



逻辑运算符

\&\& 逻辑与 两者都为真 真

|| 逻辑或 只要一个真 真

！ 取反 非零为真，零为假



逻辑表达式的本质结果也是0或1



C语言的逻辑运算具有“短路”特性

A \&\& B 若A为假，B不再计算。

A \\|\\| B 若A为真，B不再计算



逻辑优先级（从高到低）

1\.	!

2\.	\* / %

3\.	+ -

4\.	< <= > >=

5\.	== !=

6\.	\&\&

7\.	||

括号最高



赋值运算符和赋值表达式



算术运算符 优先于 关系运算符 优先于 双目逻辑运算符 优先于 赋值运算符。

赋值运算符的结核性是从右至左。



最基本形式：变量=表达式  。  赋值运算符左边必须是变量 右边可以是常量、变量或是表达式。 例如 a=5 。



复合赋值运算符



**变量 双目运算符= 表达式**



复合赋值运算符是对变量进行运算后再赋值。示例：int a = 10



复合赋值运算符的优点是：更简洁 执行更高效    。

复合赋值运算符右边的表达式是自动加括号的。



赋值表达式的构成规则：变量=表达式

变量 复合赋值运算符 表达式



逗号运算符和逗号表达式

构成规则：表达式1，表达式2



逗号运算符的优先级是**最低**的 结核性是从左至右。



条件运算符和条件表达式

使用形式：表达式1？表达式2；表达式3。



其他运算符 优先于 条件运算符 优先于 赋值和复合赋值运算符 优先于 逗号运算符 。

结核性是从右至左。



位运算符和位运算表达式



计算机的内存是由许多称为 **字节** 的单元组成的。

数值有：原码、反码、补码。



位逻辑运算符的运算对象只能是整型或字符型数据。运算对象以二进制形式进行对应的按位运算。

~优先于 双目算数运算符 优先于 关系运算符 优先于 \& 优先于 ^ 优先于 | 优先于双目逻辑运算符 结合性是从右至左。



位移位运算符



运算对象以二进制形式进行相应的按位运算。



算术运算符 优先于 位移位运算符 优先于 关系运算符。

位移位运算符的优先级相同，结合性是从右至左。



长度运算符



与单目算术运算符，单目逻辑运算符，自增和自减运算符优先级相同。结合性都是从右至左。



3.5 数据类型转换



“就高不就低”或“就长不就短”的原则

横向向左表示必须的转换 （p88）



赋值类型转换

先将运算结果的数据类型自动转换为左边变量的数据类型。



强制类型转换

格式如下：（数据类型符）（表达式）

例：（double）a

