第七章：指针



7.1指针



指针是一种数据类型，也是c语言的一个重要特色。指针是存放数据的内存单元地址。

字符型变量占用1字节，短整型变量占用2字节，单精度实型变量占用4字节，双精度实型变量占用连续8字节。

指针示例：（p222）



7.1.2 指针变量



指针变量和其他变量一样，先定义后使用。

格式：数据类型符 \*指针变量名\[初始地址值],...;

数据类型符只能是指针变量所指向的变量或数组的数据类型，而不是存放的。

初始地址值通常是"\&变量名""\&数组元素"或"一维数组名"。

指针变量的初始化，可以是已经初始化的同类型的指针变量，也可以是NULL。



指针变量的一般使用格式：指针变量=地址型表达式。

直接使用格式：指针变量名。

通过指针变量引用所指向的变量格式：\*指针变量名。



指针的基本运算：

取地址运算符：\&

功能是取变量的地址。



指针运算符：\*

功能是取指针变量所指向地址中的内容。



7.2 指针和数组



数组名就是首元素地址

int a\[5] = {1,2,3,4,5};

等价于：

a       == \&a\[0]

\*(a)     == a\[0]

\*(a + 1) == a\[1]



用指针访问数组：

int \*p = a;



printf("%d\\n", \*p);      // a\[0]

printf("%d\\n", \*(p+1));  // a\[1]



结论：

a\[i] == \*(a + i)

p\[i] == \*(p + i)



7.2.2 指针变量的运算

指针运算：

指的是对指针变量本身进行的加、减、比较等操作。



注意：

指针运算 ≠ 普通整数运算

指针的每一次移动，都和 所指向的数据类型大小 有关。

**p + 1 实际地址 = p + sizeof(int)**



指针变量可以进行赋值运算、部分算数运算和关系运算。



7.3 指针和字符串



字符串是什么？

在 C 语言中：

字符串是以 '\\0' 结尾的字符数组。

例：char s\[] = {'h','e','l','l','o','\\0'};  // 等价于 "hello"。

字符串一定是字符数组，但字符数组不一定是字符串。

可以处理整个支付穿，以及处理字符串的单个字符。



char \*p = s;

这是合法的，因为：

s 是 \&s\[0]

p 是 char \*



字符指针和字符数组的区别是存储内容不同，赋值方式不同。



7.4 指针与函数



指针变量可以作为函数的形参，也可以作为函数的实参。

本质上是值传递的数据传递方式。实参形参变量指向同一个变量。



例：普通函数：

void f(int x) {

&nbsp;   x = 10;

}



指针函数：

void f(int \*p) {

&nbsp;   \*p = 10;

}



**指针型函数是指函数的返回值是指针型！**



7.5 指针数组

指针数组是数组中的元素均为指针变量，可用于处理二维数组或多个字符串。

格式：数据类型夫 \*指针数组名\[数组长度];

例如：int \*p\[6];



一维数组与指针等价访问：

int a\[5] = {1,2,3,4,5};

int \*p = a;



等价于：

a\[i] == \*(a + i)

p\[i] == \*(p + i)



指针运算规则：

p+1

含义：指向下一个元素（不是地址+1，而是急＋sizeof（类型）。



指针数组元素赋值分为两种情况：

将数组名赋予指针数组各元素和将字符串直接赋予指针数组元素。



7.6 指针的程序设计示例

（p246~p249）。



